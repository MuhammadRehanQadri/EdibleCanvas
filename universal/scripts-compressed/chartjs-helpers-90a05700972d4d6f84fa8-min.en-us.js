(function(l){function t(t){var e=t[0];var i=t[1];var s=t[2];var a,n,o=0,h=[];for(;o<e.length;o++){n=e[o];Object.prototype.hasOwnProperty.call(c,n)&&c[n]&&h.push(c[n][0]);c[n]=0}for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(l[a]=i[a]);d&&d(t);while(h.length)h.shift()();u.push.apply(u,s||[]);return r()}function r(){var t;for(var e=0;e<u.length;e++){var i=u[e];var s=true;for(var a=1;a<i.length;a++){var n=i[a];0!==c[n]&&(s=false)}if(s){u.splice(e--,1);t=o(o.s=i[0])}}return t}var i={};var c={"chartjs-helpers":0};var u=[];function o(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:false,exports:{}};l[t].call(e.exports,e,e.exports,o);e.l=true;return e.exports}o.m=l;o.c=i;o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:true,get:i})};o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});Object.defineProperty(t,"__esModule",{value:true})};o.t=function(e,t){1&t&&(e=o(e));if(8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);o.r(i);Object.defineProperty(i,"default",{enumerable:true,value:e});if(2&t&&"string"!=typeof e)for(var s in e)o.d(i,s,function(t){return e[t]}.bind(null,s));return i};o.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};o.d(t,"a",t);return t};o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};o.p="https://assets.squarespace.com/universal/scripts-compressed/";var e=window["wpJsonpStyleLoader"]=window["wpJsonpStyleLoader"]||[];var s=e.push.bind(e);e.push=t;e=e.slice();for(var a=0;a<e.length;a++)t(e[a]);var d=s;u.push(["./src/main/webapp/universal/scripts-v6/rollups/chartjs-helpers.manifest.js","moment-js-vendor","common-vendors"]);return r()})({"./common/temp/node_modules/@sqs/chart.js/Chart.js":function(q,J,Z){var Q;(function(){"use strict";var t=this,e=t.Chart;var o=function(t){var e=this;this.canvas=t.canvas;this.ctx=t;var i=function(t,e){return t["offset"+e]?t["offset"+e]:document.defaultView.getComputedStyle(t).getPropertyValue(e)};var s=this.width=i(t.canvas,"Width");var a=this.height=i(t.canvas,"Height");t.canvas.width=s;t.canvas.height=a;var s=this.width=t.canvas.width;var a=this.height=t.canvas.height;this.aspectRatio=this.width/this.height;d.retinaScale(this);return this};o.defaults={global:{animation:true,animationSteps:60,animationEasing:"easeOutQuart",showScale:true,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleIntegersOnly:true,scaleBeginAtZero:false,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:false,maintainAspectRatio:true,showTooltips:true,customTooltips:false,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}};o.types={};var d=o.helpers={};var p=d.each=function(t,e,i){var s=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var a;for(a=0;a<t.length;a++)e.apply(i,[t[a],a].concat(s))}else for(var n in t)e.apply(i,[t[n],n].concat(s))},n=d.clone=function(i){var s={};p(i,function(t,e){i.hasOwnProperty(e)&&(s[e]=t)});return s},h=d.extend=function(s){p(Array.prototype.slice.call(arguments,1),function(i){p(i,function(t,e){i.hasOwnProperty(e)&&(s[e]=t)})});return s},l=d.merge=function(t,e){var i=Array.prototype.slice.call(arguments,0);i.unshift({});return h.apply(null,i)},f=d.indexOf=function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},i=d.where=function(t,e){var i=[];d.each(t,function(t){e(t)&&i.push(t)});return i},s=d.findNextWhere=function(t,e,i){i=i||-1;for(var s=i+1;s<t.length;s++){var a=t[s];if(e(a))return a}},a=d.findPreviousWhere=function(t,e,i){i=i||t.length;for(var s=i-1;s>=0;s--){var a=t[s];if(e(a))return a}},r=d.inherits=function(t){var e=this;var i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)};var s=function(){this.constructor=i};s.prototype=e.prototype;i.prototype=new s;i.extend=r;t&&h(i.prototype,t);i.__super__=e.prototype;return i},c=d.noop=function(){},u=d.uid=function(){var t=0;return function(){return"chart-"+t++}}(),g=d.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},m=d.amd=(true,Z("./node_modules/webpack/buildin/amd-options.js")),v=d.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},b=d.max=function(t){return Math.max.apply(Math,t)},y=d.min=function(t){return Math.min.apply(Math,t)},S=d.cap=function(t,e,i){if(v(e)){if(t>e)return e}else if(v(i)&&t<i)return i;return t},C=d.getDecimalPlaces=function(t){return t%1!==0&&v(t)?t.toString().split(".")[1].length:0},x=d.radians=function(t){return t*(Math.PI/180)},w=d.getAngleFromPoint=function(t,e){var i=e.x-t.x,s=e.y-t.y,a=Math.sqrt(i*i+s*s);var n=2*Math.PI+Math.atan2(s,i);i<0&&s<0&&(n+=2*Math.PI);return{angle:n,distance:a}},L=d.aliasPixel=function(t){return t%2===0?0:.5},P=d.splineCurve=function(t,e,i,s){var a=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),n=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)),o=s*a/(a+n),h=s*n/(a+n);return{inner:{x:e.x-o*(i.x-t.x),y:e.y-o*(i.y-t.y)},outer:{x:e.x+h*(i.x-t.x),y:e.y+h*(i.y-t.y)}}},k=d.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)},A=d.calculateScaleRange=function(t,e,i,s,a){var n=2,o=Math.floor(e/(1.5*i)),h=n>=o;var l=b(t),r=y(t);if(l===r){l+=.5;r>=.5&&!s?r-=.5:l+=.5}var c=Math.abs(l-r),u=k(c),d=Math.ceil(l/(1*Math.pow(10,u)))*Math.pow(10,u),p=s?0:Math.floor(r/(1*Math.pow(10,u)))*Math.pow(10,u),f=d-p,g=Math.pow(10,u),m=Math.round(f/g);while((m>o||2*m<o)&&!h)if(m>o){g*=2;m=Math.round(f/g);m%1!==0&&(h=true)}else if(a&&u>=0){if(g/2%1!==0)break;g/=2;m=Math.round(f/g)}else{g/=2;m=Math.round(f/g)}if(h){m=n;g=f/m}return{steps:m,stepValue:g,min:p,max:p+m*g}},F=d.template=function(t,e){if(t instanceof Function)return t(e);var s={};function i(t,e){var i=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):s[t]=s[t];return e?i(e):i}return i(t,e)},T=d.generateLabels=function(i,t,s,a){var n=new Array(t);labelTemplateString&&p(n,function(t,e){n[e]=F(i,{value:s+a*(e+1)})});return n},R=d.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){if((t/=.5)<1)return.5*t*t;return-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){if((t/=.5)<1)return.5*t*t*t;return.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){if((t/=.5)<1)return.5*t*t*t*t;return-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){if((t/=.5)<1)return.5*t*t*t*t*t;return.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(1-Math.pow(2,-10*t/1))},easeInOutExpo:function(t){if(0===t)return 0;if(1===t)return 1;if((t/=.5)<1)return.5*Math.pow(2,10*(t-1));return.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){if(t>=1)return t;return-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){if((t/=.5)<1)return-.5*(Math.sqrt(1-t*t)-1);return.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158;var i=0;var s=1;if(0===t)return 0;if(1==(t/=1))return 1;i=i||.3;if(s<Math.abs(1)){s=1;e=i/4}else e=i/(2*Math.PI)*Math.asin(1/s);return-s*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/i)},easeOutElastic:function(t){var e=1.70158;var i=0;var s=1;if(0===t)return 0;if(1==(t/=1))return 1;i=i||.3;if(s<Math.abs(1)){s=1;e=i/4}else e=i/(2*Math.PI)*Math.asin(1/s);return s*Math.pow(2,-10*t)*Math.sin((1*t-e)*(2*Math.PI)/i)+1},easeInOutElastic:function(t){var e=1.70158;var i=0;var s=1;if(0===t)return 0;if(2==(t/=.5))return 1;i=i||.3*1.5*1;if(s<Math.abs(1)){s=1;e=i/4}else e=i/(2*Math.PI)*Math.asin(1/s);if(t<1)return s*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/i)*-.5;return s*Math.pow(2,-10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/i)*.5+1},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;if((t/=.5)<1)return t*t*((1+(e*=1.525))*t-e)*.5;return.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-R.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t*1:t<2/2.75?1*(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){if(t<.5)return.5*R.easeInBounce(2*t);return.5*R.easeOutBounce(2*t-1)+.5}},_=d.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),M=d.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)}}(),z=d.animationLoop=function(i,s,t,a,n,o){var h=0,l=R[t]||R.linear;var r=function(){h++;var t=h/s;var e=l(t);i.call(o,e,t,h);a.call(o,e,t);h<s?o.animationFrame=_(r):n.apply(o)};_(r)},W=d.getRelativePosition=function(t){var e,i;var s=t.originalEvent||t,a=t.currentTarget||t.srcElement,n=a.getBoundingClientRect();if(s.touches){e=s.touches[0].clientX-n.left;i=s.touches[0].clientY-n.top}else{e=s.clientX-n.left;i=s.clientY-n.top}return{x:e,y:i}},B=d.addEvent=function(t,e,i){t.addEventListener?t.addEventListener(e,i):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i},E=d.removeEvent=function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,false):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=c},I=d.bindEvents=function(e,t,i){e.events||(e.events={});p(t,function(t){e.events[t]=function(){i.apply(e,arguments)};B(e.chart.canvas,t,e.events[t])})},O=d.unbindEvents=function(i,t){p(t,function(t,e){E(i.chart.canvas,e,t)})},D=d.getMaximumWidth=function(t){var e=t.parentNode;return e.clientWidth},H=d.getMaximumHeight=function(t){var e=t.parentNode;return e.clientHeight},j=d.getMaximumSize=d.getMaximumWidth,V=d.retinaScale=function(t){var e=t.ctx,i=t.canvas.width,s=t.canvas.height;if(window.devicePixelRatio){e.canvas.style.width=i+"px";e.canvas.style.height=s+"px";e.canvas.height=s*window.devicePixelRatio;e.canvas.width=i*window.devicePixelRatio;e.scale(window.devicePixelRatio,window.devicePixelRatio)}},Y=d.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},X=d.fontString=function(t,e,i){return e+" "+t+"px "+i},N=d.longestText=function(s,t,e,a){a=a||1/0;s.font=t;var n=0;p(e,function(t){var e=a<1/0&&t.length>a?t.slice(0,a)+"...":t;var i=s.measureText(e).width;n=i>n?i:n});return n},G=d.drawRoundedRectangle=function(t,e,i,s,a,n){t.beginPath();t.moveTo(e+n,i);t.lineTo(e+s-n,i);t.quadraticCurveTo(e+s,i,e+s,i+n);t.lineTo(e+s,i+a-n);t.quadraticCurveTo(e+s,i+a,e+s-n,i+a);t.lineTo(e+n,i+a);t.quadraticCurveTo(e,i+a,e,i+a-n);t.lineTo(e,i+n);t.quadraticCurveTo(e,i,e+n,i);t.closePath()};o.instances={};o.Type=function(t,e,i){this.options=e;this.chart=i;this.id=u();o.instances[this.id]=this;e.responsive&&this.resize();this.initialize.call(this,t)};h(o.Type.prototype,{initialize:function(){return this},clear:function(){Y(this.chart);return this},stop:function(){M(this.animationFrame);return this},resize:function(t){this.stop();var e=this.chart.canvas,i=D(this.chart.canvas),s=this.options.maintainAspectRatio?i/this.chart.aspectRatio:H(this.chart.canvas);e.width=this.chart.width=i;e.height=this.chart.height=s;V(this.chart);"function"===typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1));return this},reflow:c,render:function(t){t&&this.reflow();if(this.options.animation&&!t)d.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this);else{this.draw();this.options.onAnimationComplete.call(this)}return this},generateLegend:function(){return F(this.options.legendTemplate,this)},destroy:function(){this.clear();O(this,this.events);var t=this.chart.canvas;t.width=this.chart.width;t.height=this.chart.height;if(t.style.removeProperty){t.style.removeProperty("width");t.style.removeProperty("height")}else{t.style.removeAttribute("width");t.style.removeAttribute("height")}delete o.instances[this.id]},showTooltip:function(t,e){"undefined"===typeof this.activeElements&&(this.activeElements=[]);var i=function(t){var i=false;if(t.length!==this.activeElements.length){i=true;return i}p(t,function(t,e){t!==this.activeElements[e]&&(i=true)},this);return i}.call(this,t);if(!i&&!e)return;this.activeElements=t;this.draw();this.options.customTooltips&&this.options.customTooltips(false);if(t.length>0)if(this.datasets&&this.datasets.length>1){var s,r;for(var a=this.datasets.length-1;a>=0;a--){s=this.datasets[a].points||this.datasets[a].bars||this.datasets[a].segments;r=f(s,t[0]);if(-1!==r)break}var c=[],u=[],n=function(t){var e=[],i,s=[],a=[],n,o,h,l;d.each(this.datasets,function(t){i=t.points||t.bars||t.segments;i[r]&&i[r].hasValue()&&e.push(i[r])});d.each(e,function(t){s.push(t.x);a.push(t.y);c.push(d.template(this.options.multiTooltipTemplate,t));u.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this);l=y(a);o=b(a);h=y(s);n=b(s);return{x:h>this.chart.width/2?h:n,y:(l+o)/2}}.call(this,r);new o.MultiTooltip({x:n.x,y:n.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:c,legendColors:u,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else p(t,function(t){var e=t.tooltipPosition();new o.Tooltip({x:Math.round(e.x),y:Math.round(e.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:F(this.options.tooltipTemplate,t),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}});o.Type.extend=function(t){var e=this;var s=function(){return e.apply(this,arguments)};s.prototype=n(e.prototype);h(s.prototype,t);s.extend=o.Type.extend;if(t.name||e.prototype.name){var a=t.name||e.prototype.name;var i=o.defaults[e.prototype.name]?n(o.defaults[e.prototype.name]):{};o.defaults[a]=h(i,t.defaults);o.types[a]=s;o.prototype[a]=function(t,e){var i=l(o.defaults.global,o.defaults[a],e||{});return new s(t,i,this)}}else g("Name not provided for this chart, so it hasn't been registered");return e};o.Element=function(t){h(this,t);this.initialize.apply(this,arguments);this.save()};h(o.Element.prototype,{initialize:function(){},restore:function(t){t?p(t,function(t){this[t]=this._saved[t]},this):h(this,this._saved);return this},save:function(){this._saved=n(this);delete this._saved._saved;return this},update:function(t){p(t,function(t,e){this._saved[e]=this[e];this[e]=t},this);return this},transition:function(t,i){p(t,function(t,e){this[e]=(t-this._saved[e])*i+this._saved[e]},this);return this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return v(this.value)}});o.Element.extend=r;o.Point=o.Element.extend({display:true,inRange:function(t,e){var i=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(e-this.y,2)<Math.pow(i,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath();t.arc(this.x,this.y,this.radius,0,2*Math.PI);t.closePath();t.strokeStyle=this.strokeColor;t.lineWidth=this.strokeWidth;t.fillStyle=this.fillColor;t.fill();t.stroke()}}});o.Arc=o.Element.extend({inRange:function(t,e){var i=d.getAngleFromPoint(this,{x:t,y:e});var s=i.angle>=this.startAngle&&i.angle<=this.endAngle,a=i.distance>=this.innerRadius&&i.distance<=this.outerRadius;return s&&a},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,e=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*e,y:this.y+Math.sin(t)*e}},draw:function(t){var e=t||1;var i=this.ctx;i.beginPath();i.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle);i.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,true);i.closePath();i.strokeStyle=this.strokeColor;i.lineWidth=this.strokeWidth;i.fillStyle=this.fillColor;i.fill();i.lineJoin="bevel";this.showStroke&&i.stroke()}});o.Rectangle=o.Element.extend({draw:function(){var t=this.ctx,e=this.width/2,i=this.x-e,s=this.x+e,a=this.base-(this.base-this.y),n=this.strokeWidth/2;if(this.showStroke){i+=n;s-=n;a+=n}t.beginPath();t.fillStyle=this.fillColor;t.strokeStyle=this.strokeColor;t.lineWidth=this.strokeWidth;t.moveTo(i,this.base);t.lineTo(i,a);t.lineTo(s,a);t.lineTo(s,this.base);t.fill();this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,e){return this.y<this.base?t>=this.x-this.width/2&&t<=this.x+this.width/2&&e>=this.y&&e<=this.base:t>=this.x-this.width/2&&t<=this.x+this.width/2&&e>=this.base&&e<=this.y}});o.Tooltip=o.Element.extend({draw:function(){var t=this.chart.ctx;t.font=X(this.fontSize,this.fontStyle,this.fontFamily);this.xAlign="center";this.yAlign="above";var e=this.caretPadding=2;var i=t.measureText(this.text).width+2*this.xPadding,s=this.fontSize+2*this.yPadding,a=s+this.caretHeight+e;this.x+i/2>this.chart.width?this.xAlign="left":this.x-i/2<0&&(this.xAlign="right");this.y-a<0&&(this.yAlign="below");var n=this.x-i/2,o=this.y-a;t.fillStyle=this.fillColor;if(this.custom)this.custom(this);else{switch(this.yAlign){case"above":t.beginPath();t.moveTo(this.x,this.y-e);t.lineTo(this.x+this.caretHeight,this.y-(e+this.caretHeight));t.lineTo(this.x-this.caretHeight,this.y-(e+this.caretHeight));t.closePath();t.fill();break;case"below":o=this.y+e+this.caretHeight;t.beginPath();t.moveTo(this.x,this.y+e);t.lineTo(this.x+this.caretHeight,this.y+e+this.caretHeight);t.lineTo(this.x-this.caretHeight,this.y+e+this.caretHeight);t.closePath();t.fill();break}switch(this.xAlign){case"left":n=this.x-i+(this.cornerRadius+this.caretHeight);break;case"right":n=this.x-(this.cornerRadius+this.caretHeight);break}G(t,n,o,i,s,this.cornerRadius);t.fill();t.fillStyle=this.textColor;t.textAlign="center";t.textBaseline="middle";t.fillText(this.text,n+i/2,o+s/2)}}});o.MultiTooltip=o.Element.extend({initialize:function(){this.font=X(this.fontSize,this.fontStyle,this.fontFamily);this.titleFont=X(this.titleFontSize,this.titleFontStyle,this.titleFontFamily);this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize;this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,e=N(this.ctx,this.font,this.labels)+this.fontSize+3,i=b([e,t]);this.width=i+2*this.xPadding;var s=this.height/2;this.y-s<0?this.y=s:this.y+s>this.chart.height&&(this.y=this.chart.height-s);this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var e=this.y-this.height/2+this.yPadding,i=t-1;return 0===t?e+this.titleFontSize/2:e+(1.5*this.fontSize*i+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{G(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var i=this.ctx;i.fillStyle=this.fillColor;i.fill();i.closePath();i.textAlign="left";i.textBaseline="middle";i.fillStyle=this.titleTextColor;i.font=this.titleFont;i.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0));i.font=this.font;d.each(this.labels,function(t,e){i.fillStyle=this.textColor;i.fillText(t,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(e+1));i.fillStyle=this.legendColorBackground;i.fillRect(this.x+this.xPadding,this.getLineHeight(e+1)-this.fontSize/2,this.fontSize,this.fontSize);i.fillStyle=this.legendColors[e].fill;i.fillRect(this.x+this.xPadding,this.getLineHeight(e+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}});o.Scale=o.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];var t=C(this.stepValue);for(var e=0;e<=this.steps;e++)this.yLabels.push(F(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?N(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t);this.valuesCount++;this.fit()},removeXLabel:function(){this.xLabels.shift();this.valuesCount--;this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0;this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height;this.startPoint+=this.padding;this.endPoint-=this.padding;var t=this.endPoint-this.startPoint,e;this.calculateYRange(t);this.buildYLabels();this.calculateXLabelRotation();while(t>this.endPoint-this.startPoint){t=this.endPoint-this.startPoint;e=this.yLabelWidth;this.calculateYRange(t);this.buildYLabels();e<this.yLabelWidth&&this.calculateXLabelRotation()}},calculateXLabelRotation:function(){this.ctx.font=this.font;var t=this.xLabels[0],e=this.xLabels[this.xLabels.length-1],i=this.ctx.measureText(t).width,s=this.ctx.measureText(e).width,a,n;this.xScalePaddingRight=s/2+3;this.xScalePaddingLeft=i/2>this.yLabelWidth+10?i/2:this.yLabelWidth+10;this.xLabelRotation=0;this.xLabelLimit=1/0;if(this.display){var o=N(this.ctx,this.font,this.xLabels),h=0,l,r;this.xLabelWidth=o;var c=Math.floor(this.calculateX(1)-this.calculateX(0))-6;var u=this.endPoint-this.startPoint;var d=0;while(this.xLabelWidth>c&&this.xLabelRotation<=90&&this.xLabelRotation>=0){if(h<u/2||this.LabelLimit<5){this.xLabelRotation++;l=Math.cos(x(this.xLabelRotation));a=l*i;n=l*s;a+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=a+this.fontSize/2);this.xScalePaddingRight=this.fontSize/2}else{this.xLabelLimit<1/0?this.xLabelLimit-=1:this.xLabelLimit=Math.max.apply(null,this.xLabels.map(function(t){return t.length}))-1;o=N(this.ctx,this.font,this.xLabels,this.xLabelLimit);t.length>this.xLabelLimit&&(i=this.ctx.measureText(t.slice(0,this.xLabelLimit)+"...").width);e.length>this.xLabelLimit&&(s=this.ctx.measureText(e.slice(0,this.xLabelLimit)+"...").width)}h=Math.sin(x(this.xLabelRotation))*o+3;this.xLabelWidth=l*o;if(++d>=1e3){console.warn("Too many iterations!");break}}this.xLabelRotation>0&&(this.endPoint-=h)}else{this.xLabelWidth=0;this.xScalePaddingRight=this.padding;this.xScalePaddingLeft=this.padding}},calculateYRange:c,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var e=this.drawingArea()/(this.min-this.max);return this.endPoint-e*(t-this.min)},calculateX:function(t){var e=this.xLabelRotation>0,i=this.width-(this.xScalePaddingLeft+this.xScalePaddingRight),s=i/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),a=s*t+this.xScalePaddingLeft;this.offsetGridLines&&(a+=s/2);return Math.round(a)},update:function(t){d.extend(this,t);this.fit()},draw:function(){var o=this.ctx,n=(this.endPoint-this.startPoint)/this.steps,h=Math.round(this.xScalePaddingLeft);if(this.display){o.fillStyle=this.textColor;o.font=this.font;p(this.yLabels,function(t,e){var i=this.endPoint-n*e,s=Math.round(i),a=this.showHorizontalLines;o.textAlign="right";o.textBaseline="middle";this.showLabels&&o.fillText(t,h-10,i);0!==e||a||(a=true);a&&o.beginPath();if(e>0){o.lineWidth=this.gridLineWidth;o.strokeStyle=this.gridLineColor}else{o.lineWidth=this.lineWidth;o.strokeStyle=this.lineColor}s+=d.aliasPixel(o.lineWidth);if(a){o.moveTo(h,s);o.lineTo(this.width,s);o.stroke();o.closePath()}o.lineWidth=this.lineWidth;o.strokeStyle=this.lineColor;o.beginPath();o.moveTo(h-5,s);o.lineTo(h,s);o.stroke();o.closePath()},this);p(this.xLabels,function(t,e){var i=this.calculateX(e)+L(this.lineWidth),s=this.calculateX(e-(this.offsetGridLines?.5:0))+L(this.lineWidth),a=this.xLabelRotation>0,n=this.showVerticalLines;0!==e||n||(n=true);n&&o.beginPath();if(e>0){o.lineWidth=this.gridLineWidth;o.strokeStyle=this.gridLineColor}else{o.lineWidth=this.lineWidth;o.strokeStyle=this.lineColor}if(n){o.moveTo(s,this.endPoint);o.lineTo(s,this.startPoint-3);o.stroke();o.closePath()}o.lineWidth=this.lineWidth;o.strokeStyle=this.lineColor;o.beginPath();o.moveTo(s,this.endPoint);o.lineTo(s,this.endPoint+5);o.stroke();o.closePath();o.save();o.translate(i,a?this.endPoint+12:this.endPoint+8);o.rotate(-1*x(this.xLabelRotation));o.font=this.font;o.textAlign=a?"right":"center";o.textBaseline=a?"middle":"top";t.length>this.xLabelLimit?o.fillText(t.slice(0,this.xLabelLimit)+"...",0,0):o.fillText(t,0,0);o.restore()},this)}}});o.RadialScale=o.Element.extend({initialize:function(){this.size=y([this.height,this.width]);this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var e=this.drawingArea/(this.max-this.min);return(t-this.min)*e},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize();this.buildYLabels()},buildYLabels:function(){this.yLabels=[];var t=C(this.stepValue);for(var e=0;e<=this.steps;e++)this.yLabels.push(F(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t=y([this.height/2-this.pointLabelFontSize-5,this.width/2]),e,i,s,a,n=this.width,o,h,l=0,r,c,u,d,p,f,g;this.ctx.font=X(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);for(i=0;i<this.valuesCount;i++){e=this.getPointPosition(i,t);s=this.ctx.measureText(F(this.templateString,{value:this.labels[i]})).width+5;if(0===i||i===this.valuesCount/2){a=s/2;if(e.x+a>n){n=e.x+a;o=i}if(e.x-a<l){l=e.x-a;r=i}}else if(i<this.valuesCount/2){if(e.x+s>n){n=e.x+s;o=i}}else if(i>this.valuesCount/2&&e.x-s<l){l=e.x-s;r=i}}u=l;d=Math.ceil(n-this.width);h=this.getIndexAngle(o);c=this.getIndexAngle(r);p=d/Math.sin(h+Math.PI/2);f=u/Math.sin(c+Math.PI/2);p=v(p)?p:0;f=v(f)?f:0;this.drawingArea=t-(f+p)/2;this.setCenterPoint(f,p)},setCenterPoint:function(t,e){var i=this.width-e-this.drawingArea,s=t+this.drawingArea;this.xCenter=(s+i)/2;this.yCenter=this.height/2},getIndexAngle:function(t){var e=2*Math.PI/this.valuesCount;return t*e-Math.PI/2},getPointPosition:function(t,e){var i=this.getIndexAngle(t);return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter}},draw:function(){if(this.display){var h=this.ctx;p(this.yLabels,function(t,e){if(e>0){var i=e*(this.drawingArea/this.steps),s=this.yCenter-i,a;if(this.lineWidth>0){h.strokeStyle=this.lineColor;h.lineWidth=this.lineWidth;if(this.lineArc){h.beginPath();h.arc(this.xCenter,this.yCenter,i,0,2*Math.PI);h.closePath();h.stroke()}else{h.beginPath();for(var n=0;n<this.valuesCount;n++){a=this.getPointPosition(n,this.calculateCenterOffset(this.min+e*this.stepValue));0===n?h.moveTo(a.x,a.y):h.lineTo(a.x,a.y)}h.closePath();h.stroke()}}if(this.showLabels){h.font=X(this.fontSize,this.fontStyle,this.fontFamily);if(this.showLabelBackdrop){var o=h.measureText(t).width;h.fillStyle=this.backdropColor;h.fillRect(this.xCenter-o/2-this.backdropPaddingX,s-this.fontSize/2-this.backdropPaddingY,o+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}h.textAlign="center";h.textBaseline="middle";h.fillStyle=this.fontColor;h.fillText(t,this.xCenter,s)}}},this);if(!this.lineArc){h.lineWidth=this.angleLineWidth;h.strokeStyle=this.angleLineColor;for(var t=this.valuesCount-1;t>=0;t--){if(this.angleLineWidth>0){var e=this.getPointPosition(t,this.calculateCenterOffset(this.max));h.beginPath();h.moveTo(this.xCenter,this.yCenter);h.lineTo(e.x,e.y);h.stroke();h.closePath()}var i=this.getPointPosition(t,this.calculateCenterOffset(this.max)+5);h.font=X(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);h.fillStyle=this.pointLabelFontColor;var s=this.labels.length,a=this.labels.length/2,n=a/2,o=t<n||t>s-n,l=t===n||t===s-n;h.textAlign=0===t?"center":t===a?"center":t<a?"left":"right";h.textBaseline=l?"middle":o?"bottom":"top";h.fillText(this.labels[t],i.x,i.y)}}}}});d.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t);t=setTimeout(function(){p(o.instances,function(t){if(t.options.responsive)try{t.resize(t.render,true)}catch(t){console.log(t.message)}})},50)}}());m?!(Q=function(){return o}.call(J,Z,J,q),void 0!==Q&&(q.exports=Q)):(true,q.exports)&&(q.exports=o);t.Chart=o;o.noConflict=function(){t.Chart=e;return o}}).call(this);(function(){"use strict";var t=this,e=t.Chart,h=e.helpers;var i={scaleBeginAtZero:true,scaleShowGridLines:true,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:true,scaleShowVerticalLines:true,barShowStroke:true,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Bar",defaults:i,initialize:function(a){var o=this.options;this.ScaleClass=e.Scale.extend({offsetGridLines:true,calculateBarX:function(t,e,i){var s=this.calculateBaseWidth(),a=this.calculateX(i)-s/2,n=this.calculateBarWidth(t);return a+n*e+e*o.barDatasetSpacing+n/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*o.barValueSpacing},calculateBarWidth:function(t){var e=this.calculateBaseWidth()-(t-1)*o.barDatasetSpacing;return e/t}});this.datasets=[];this.options.showTooltips&&h.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])});h.each(e,function(t){t.fillColor=t.highlightFill;t.strokeColor=t.highlightStroke});this.showTooltip(e)});this.BarClass=e.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx});h.each(a.datasets,function(i,t){var s={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,bars:[]};this.datasets.push(s);h.each(i.data,function(t,e){s.bars.push(new this.BarClass({value:t,label:a.labels[e],datasetLabel:i.label,strokeColor:i.strokeColor,fillColor:i.fillColor,highlightFill:i.highlightFill||i.fillColor,highlightStroke:i.highlightStroke||i.strokeColor}))},this)},this);this.buildScale(a.labels);this.BarClass.prototype.base=this.calculateBarBase();this.eachBars(function(t,e,i){h.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,i,e),y:this.calculateBarBase()});t.save()},this);this.render()},calculateBarBase:function(){var t=function(t){return t>=0?1:-1};var e=this.scale.endPoint;this.scale.beginAtZero||t(this.scale.min)!=t(this.scale.max)?e=this.scale.calculateY(0):t(this.scale.min)<0&&t(this.scale.max)<0&&(e=this.scale.startPoint);return e},update:function(){this.scale.update();h.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])});this.eachBars(function(t){t.save()});this.render()},eachBars:function(i){h.each(this.datasets,function(t,e){h.each(t.bars,i,this,e)},this)},getBarsAtEvent:function(t){var e=[],i=h.getRelativePosition(t),s=function(t){e.push(t.bars[a])},a;for(var n=0;n<this.datasets.length;n++)for(a=0;a<this.datasets[n].bars.length;a++)if(this.datasets[n].bars[a].inRange(i.x,i.y)){h.each(this.datasets,s);return e}return e},buildScale:function(t){var i=this;var s=function(){var e=[];i.eachBars(function(t){e.push(t.value)});return e};var a=function(){var t=s().reduce(function(t,e){return t.concat(e)},[]);return i.options.scaleBeginAtZero&&Math.min.apply(null,t)>=0};var e={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:a(),integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=h.calculateScaleRange(s(),t,this.fontSize,a(),this.integersOnly);h.extend(this,e)},xLabels:t,font:h.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&h.extend(e,{calculateYRange:h.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new this.ScaleClass(e)},addData:function(t,i){h.each(t,function(t,e){this.datasets[e].bars.push(new this.BarClass({value:t,label:i,x:this.scale.calculateBarX(this.datasets.length,e,this.scale.valuesCount+1),y:this.calculateBarBase(),width:this.scale.calculateBarWidth(this.datasets.length),base:this.calculateBarBase(),strokeColor:this.datasets[e].strokeColor,fillColor:this.datasets[e].fillColor}))},this);this.scale.addXLabel(i);this.update()},removeData:function(){this.scale.removeXLabel();h.each(this.datasets,function(t){t.bars.shift()},this);this.update()},reflow:function(){h.extend(this.BarClass.prototype,{y:this.calculateBarBase(),base:this.calculateBarBase()});var t=h.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var s=t||1;this.clear();var e=this.chart.ctx;this.scale.draw(s);h.each(this.datasets,function(t,i){h.each(t.bars,function(t,e){if(t.hasValue()){t.base=this.calculateBarBase();t.transition({x:this.scale.calculateBarX(this.datasets.length,i,e),y:this.scale.calculateY(t.value),width:this.scale.calculateBarWidth(this.datasets.length)},s).draw()}},this)},this)}})}).call(this);(function(){"use strict";var t=this,e=t.Chart,s=e.helpers;var i={segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Doughnut",defaults:i,initialize:function(t){this.segments=[];this.outerRadius=(s.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;this.SegmentArc=e.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2});this.options.showTooltips&&s.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];s.each(this.segments,function(t){t.restore(["fillColor"])});s.each(e,function(t){t.fillColor=t.highlightColor});this.showTooltip(e)});this.calculateTotal(t);s.each(t,function(t,e){this.addData(t,e,true)},this);this.render()},getSegmentsAtEvent:function(t){var e=[];var i=s.getRelativePosition(t);s.each(this.segments,function(t){t.inRange(i.x,i.y)&&e.push(t)},this);return e},addData:function(t,e,i){var s=e||this.segments.length;this.segments.splice(s,0,new this.SegmentArc({value:t.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(t.value),label:t.label}));if(!i){this.reflow();this.update()}},calculateCircumference:function(t){return 2*Math.PI*(Math.abs(t)/this.total)},calculateTotal:function(t){this.total=0;s.each(t,function(t){this.total+=Math.abs(t.value)},this)},update:function(){this.calculateTotal(this.segments);s.each(this.activeElements,function(t){t.restore(["fillColor"])});s.each(this.segments,function(t){t.save()});this.render()},removeData:function(t){var e=s.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1);this.reflow();this.update()},reflow:function(){s.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.outerRadius=(s.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;s.each(this.segments,function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var i=t||1;this.clear();s.each(this.segments,function(t,e){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},i);t.endAngle=t.startAngle+t.circumference;t.draw();0===e&&(t.startAngle=1.5*Math.PI);e<this.segments.length-1&&(this.segments[e+1].startAngle=t.endAngle)},this)}});e.types.Doughnut.extend({name:"Pie",defaults:s.merge(i,{percentageInnerCutout:0})})}).call(this);(function(){"use strict";var t=this,n=t.Chart,l=n.helpers;var e={scaleShowGridLines:true,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:true,scaleShowVerticalLines:true,bezierCurve:true,bezierCurveTension:.4,pointDot:true,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:true,datasetStrokeWidth:2,datasetFill:true,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};n.Type.extend({name:"Line",defaults:e,initialize:function(a){this.PointClass=n.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}});this.datasets=[];this.options.showTooltips&&l.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])});l.each(e,function(t){t.fillColor=t.highlightFill;t.strokeColor=t.highlightStroke});this.showTooltip(e)});l.each(a.datasets,function(i){var s={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,pointColor:i.pointColor,pointStrokeColor:i.pointStrokeColor,points:[]};this.datasets.push(s);l.each(i.data,function(t,e){s.points.push(new this.PointClass({value:t,label:a.labels[e],datasetLabel:i.label,strokeColor:i.pointStrokeColor,fillColor:i.pointColor,highlightFill:i.pointHighlightFill||i.pointColor,highlightStroke:i.pointHighlightStroke||i.pointStrokeColor}))},this);this.buildScale(a.labels);this.eachPoints(function(t,e){l.extend(t,{x:this.scale.calculateX(e),y:this.scale.endPoint});t.save()},this)},this);this.render()},update:function(){this.scale.update();l.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])});this.eachPoints(function(t){t.save()});this.render()},eachPoints:function(e){l.each(this.datasets,function(t){l.each(t.points,e,this)},this)},getPointsAtEvent:function(t){var e=[],i=l.getRelativePosition(t);l.each(this.datasets,function(t){l.each(t.points,function(t){t.inRange(i.x,i.y)&&e.push(t)})},this);return e},buildScale:function(t){var i=this;var s=function(){var e=[];i.eachPoints(function(t){e.push(t.value)});return e};var e={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=l.calculateScaleRange(s(),t,this.fontSize,this.beginAtZero,this.integersOnly);l.extend(this,e)},xLabels:t,font:l.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&l.extend(e,{calculateYRange:l.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new n.Scale(e)},addData:function(t,i){l.each(t,function(t,e){this.datasets[e].points.push(new this.PointClass({value:t,label:i,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))},this);this.scale.addXLabel(i);this.update()},removeData:function(){this.scale.removeXLabel();l.each(this.datasets,function(t){t.points.shift()},this);this.update()},reflow:function(){var t=l.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var i=t||1;this.clear();var a=this.chart.ctx;var n=function(t){return null!==t.value},o=function(t,e,i){return l.findNextWhere(e,n,i)||t},h=function(t,e,i){return l.findPreviousWhere(e,n,i)||t};this.scale.draw(i);l.each(this.datasets,function(t){var s=l.where(t.points,n);l.each(t.points,function(t,e){t.hasValue()&&t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(e)},i)},this);this.options.bezierCurve&&l.each(s,function(t,e){var i=e>0&&e<s.length-1?this.options.bezierCurveTension:0;t.controlPoints=l.splineCurve(h(t,s,e),t,o(t,s,e),i);t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint);t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this);a.lineWidth=this.options.datasetStrokeWidth;a.strokeStyle=t.strokeColor;a.beginPath();l.each(s,function(t,e){if(0===e)a.moveTo(t.x,t.y);else if(this.options.bezierCurve){var i=h(t,s,e);a.bezierCurveTo(i.controlPoints.outer.x,i.controlPoints.outer.y,t.controlPoints.inner.x,t.controlPoints.inner.y,t.x,t.y)}else a.lineTo(t.x,t.y)},this);a.stroke();if(this.options.datasetFill&&s.length>0){a.lineTo(s[s.length-1].x,this.scale.endPoint);a.lineTo(s[0].x,this.scale.endPoint);a.fillStyle=t.fillColor;a.closePath();a.fill()}l.each(s,function(t){t.draw()})},this)}})}).call(this);(function(){"use strict";var t=this,e=t.Chart,s=e.helpers;var i={scaleShowLabelBackdrop:true,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:true,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:true,segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"PolarArea",defaults:i,initialize:function(t){this.segments=[];this.SegmentArc=e.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2});this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:true,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:t.length});this.updateScaleRange(t);this.scale.update();s.each(t,function(t,e){this.addData(t,e,true)},this);this.options.showTooltips&&s.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];s.each(this.segments,function(t){t.restore(["fillColor"])});s.each(e,function(t){t.fillColor=t.highlightColor});this.showTooltip(e)});this.render()},getSegmentsAtEvent:function(t){var e=[];var i=s.getRelativePosition(t);s.each(this.segments,function(t){t.inRange(i.x,i.y)&&e.push(t)},this);return e},addData:function(t,e,i){var s=e||this.segments.length;this.segments.splice(s,0,new this.SegmentArc({fillColor:t.color,highlightColor:t.highlight||t.color,label:t.label,value:t.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(t.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI}));if(!i){this.reflow();this.update()}},removeData:function(t){var e=s.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1);this.reflow();this.update()},calculateTotal:function(t){this.total=0;s.each(t,function(t){this.total+=t.value},this);this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var e=[];s.each(t,function(t){e.push(t.value)});var i=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:s.calculateScaleRange(e,s.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);s.extend(this.scale,i,{size:s.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments);s.each(this.segments,function(t){t.save()});this.reflow();this.render()},reflow:function(){s.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.updateScaleRange(this.segments);this.scale.update();s.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2});s.each(this.segments,function(t){t.update({outerRadius:this.scale.calculateCenterOffset(t.value)})},this)},draw:function(t){var i=t||1;this.clear();s.each(this.segments,function(t,e){t.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(t.value)},i);t.endAngle=t.startAngle+t.circumference;0===e&&(t.startAngle=1.5*Math.PI);e<this.segments.length-1&&(this.segments[e+1].startAngle=t.endAngle);t.draw()},this);this.scale.draw()}})}).call(this);(function(){"use strict";var t=this,e=t.Chart,o=e.helpers;e.Type.extend({name:"Radar",defaults:{scaleShowLine:true,angleShowLineOut:true,scaleShowLabels:false,scaleBeginAtZero:true,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:true,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:true,datasetStrokeWidth:2,datasetFill:true,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(n){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx});this.datasets=[];this.buildScale(n);this.options.showTooltips&&o.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])});o.each(e,function(t){t.fillColor=t.highlightFill;t.strokeColor=t.highlightStroke});this.showTooltip(e)});o.each(n.datasets,function(s){var a={label:s.label||null,fillColor:s.fillColor,strokeColor:s.strokeColor,pointColor:s.pointColor,pointStrokeColor:s.pointStrokeColor,points:[]};this.datasets.push(a);o.each(s.data,function(t,e){var i;this.scale.animation||(i=this.scale.getPointPosition(e,this.scale.calculateCenterOffset(t)));a.points.push(new this.PointClass({value:t,label:n.labels[e],datasetLabel:s.label,x:this.options.animation?this.scale.xCenter:i.x,y:this.options.animation?this.scale.yCenter:i.y,strokeColor:s.pointStrokeColor,fillColor:s.pointColor,highlightFill:s.pointHighlightFill||s.pointColor,highlightStroke:s.pointHighlightStroke||s.pointStrokeColor}))},this)},this);this.render()},eachPoints:function(e){o.each(this.datasets,function(t){o.each(t.points,e,this)},this)},getPointsAtEvent:function(t){var e=o.getRelativePosition(t),i=o.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},e);var s=2*Math.PI/this.scale.valuesCount,a=Math.round((i.angle-1.5*Math.PI)/s),n=[];(a>=this.scale.valuesCount||a<0)&&(a=0);i.distance<=this.scale.drawingArea&&o.each(this.datasets,function(t){n.push(t.points[a])});return n},buildScale:function(t){this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:t.labels,valuesCount:t.datasets[0].data.length});this.scale.setScaleSize();this.updateScaleRange(t.datasets);this.scale.buildYLabels()},updateScaleRange:function(t){var e=function(){var e=[];o.each(t,function(t){t.data?e=e.concat(t.data):o.each(t.points,function(t){e.push(t.value)})});return e}();var i=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:o.calculateScaleRange(e,o.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);o.extend(this.scale,i)},addData:function(t,s){this.scale.valuesCount++;o.each(t,function(t,e){var i=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(t));this.datasets[e].points.push(new this.PointClass({value:t,label:s,x:i.x,y:i.y,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))},this);this.scale.labels.push(s);this.reflow();this.update()},removeData:function(){this.scale.valuesCount--;this.scale.labels.shift();o.each(this.datasets,function(t){t.points.shift()},this);this.reflow();this.update()},update:function(){this.eachPoints(function(t){t.save()});this.reflow();this.render()},reflow:function(){o.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:o.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2});this.updateScaleRange(this.datasets);this.scale.setScaleSize();this.scale.buildYLabels()},draw:function(t){var i=t||1,s=this.chart.ctx;this.clear();this.scale.draw();o.each(this.datasets,function(t){o.each(t.points,function(t,e){t.hasValue()&&t.transition(this.scale.getPointPosition(e,this.scale.calculateCenterOffset(t.value)),i)},this);s.lineWidth=this.options.datasetStrokeWidth;s.strokeStyle=t.strokeColor;s.beginPath();o.each(t.points,function(t,e){0===e?s.moveTo(t.x,t.y):s.lineTo(t.x,t.y)},this);s.closePath();s.stroke();s.fillStyle=t.fillColor;s.fill();o.each(t.points,function(t){t.hasValue()&&t.draw()})},this)}})}).call(this)},"./common/temp/node_modules/lodash/isEmpty.js":function(t,e,i){var s=i("./common/temp/node_modules/lodash/_baseKeys.js"),a=i("./common/temp/node_modules/lodash/_getTag.js"),n=i("./common/temp/node_modules/lodash/isArguments.js"),o=i("./common/temp/node_modules/lodash/isArray.js"),h=i("./common/temp/node_modules/lodash/isArrayLike.js"),l=i("./common/temp/node_modules/lodash/isBuffer.js"),r=i("./common/temp/node_modules/lodash/_isPrototype.js"),c=i("./common/temp/node_modules/lodash/isTypedArray.js");var u="[object Map]",d="[object Set]";var p=Object.prototype;var f=p.hasOwnProperty;function g(t){if(null==t)return true;if(h(t)&&(o(t)||"string"==typeof t||"function"==typeof t.splice||l(t)||c(t)||n(t)))return!t.length;var e=a(t);if(e==u||e==d)return!t.size;if(r(t))return!s(t).length;for(var i in t)if(f.call(t,i))return false;return true}t.exports=g},"./common/temp/node_modules/lodash/noop.js":function(t,e){function i(){}t.exports=i},"./node_modules/webpack/buildin/amd-options.js":function(e,t){(function(t){e.exports=t}).call(this,{})},"./src/main/webapp/universal/scripts-layout-engine/shared/constants/BlockVariantTypes.js":function(t,e){var i={GALLERY_SLIDESHOW:1e3,GALLERY_CAROUSEL:1002,GALLERY_GRID:1003,GALLERY_STACK:1004,SUMMARY_WALL:1005,SUMMARY_CAROUSEL:1006,SUMMARY_LIST:1007,SUMMARY_GRID:1008,CHART_BAR:1009,CHART_LINE:1010,CHART_PIE:1011,IMAGE_INLINE:1012,IMAGE_POSTER:1013,IMAGE_CARD:1014,IMAGE_OVERLAP:1015,IMAGE_COLLAGE:1016,IMAGE_STACK:1017};t.exports=i},"./src/main/webapp/universal/scripts-layout-engine/shared/utils/chartjs-helpers.js":function(t,e,i){var x=i("./common/temp/node_modules/lodash/isEmpty.js");var w=i("./common/temp/node_modules/lodash/noop.js");var L=i("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var P=i("./common/temp/node_modules/@sqs/chart.js/Chart.js");var k=i("./src/main/webapp/universal/scripts-layout-engine/shared/constants/BlockVariantTypes.js");YUI.add("@sqs/layout-engine/chartjs-helpers",function(p){p.namespace("ChartJS");var e=500;var n=[];var r=p.ChartJS.getDefaultChartData=function(t){switch(parseInt(t,10)){case k.CHART_BAR:return{data:[[150],[250],[150]],sampleLabels:[L("New York"),L("Las Vegas"),L("San Francisco")],seriesLabels:[L("Population")]};case k.CHART_LINE:return{data:[[150,100],[250,200],[150,350]],sampleLabels:[L("New York"),L("Las Vegas"),L("San Francisco")],seriesLabels:[L("Population"),L("GDP")]};case k.CHART_PIE:return{data:[[150],[200],[150]],sampleLabels:[L("New York"),L("Las Vegas"),L("San Francisco")],seriesLabels:[L("Population")]}}};function o(t){n.push(t)}function t(t){n.remove(t)}function h(){var t=n.map(function(t){return null===t.node.getDOMNode()?t:null});t.filter(function(t){return t}).forEach(function(t){t.destroy()})}function l(t,e,i){var s={default:[[121,121,121],[191,191,191],[229,229,229],[156,156,156],[0,0,0]],Cobblestone:[[41,31,22],[180,158,146],[127,112,105],[76,61,48],[69,45,35]],Italia:[[124,184,200],[2,100,171],[2,155,59],[227,2,27],[202,180,130]],Muted:[[52,43,43],[112,105,100],[156,148,131],[212,207,198],[240,226,208]],Primary:[[240,82,59],[247,180,19],[36,128,196],[144,187,98],[134,95,144]],Warm:[[153,0,0],[226,71,45],[233,148,48],[248,220,171],[251,243,171]],Cool:[[16,44,99],[7,75,230],[81,146,235],[158,173,211],[225,220,252]],"Tea Party":[[115,13,3],[182,125,44],[234,195,148],[231,144,72],[64,2,18]],Highway:[[176,201,217],[166,166,166],[89,72,57],[191,108,59],[230,134,50]],Shops:[[227,227,230],[69,78,89],[95,205,217],[113,153,138],[213,230,69]],Suburbs:[[73,33,48],[227,227,227],[69,84,115],[206,208,159],[236,101,102]],"DB-Nine":[[134,135,136],[168,182,111],[169,143,119],[227,126,94],[100,138,189]],"M-Three":[[98,140,187],[209,191,78],[90,98,105],[13,76,136],[188,199,208]],Thunderbird:[[217,60,73],[103,189,218],[231,231,192],[227,170,179],[177,202,123]]};var a={dark:1,medium:.75,light:.5,xlight:.2,off:0};t in s||(t="default");var n=s[t];return"rgba("+n[e%n.length]+","+a[i]+")"}function c(t){return{scaleFontFamily:t.getComputedStyle("font-family"),scaleFontSize:parseInt(t.getComputedStyle("font-size"),10),scaleFontStyle:t.getComputedStyle("font-style"),tooltipFontFamily:t.getComputedStyle("font-family"),tooltipFontSize:.8*parseInt(t.getComputedStyle("font-size"),10),tooltipFontStyle:t.getComputedStyle("font-style"),tooltipTitleFontFamily:t.getComputedStyle("font-family"),tooltipTitleFontSize:parseInt(t.getComputedStyle("font-size"),10),tooltipTitleFontStyle:"bold",scaleLabel:"<%= '  ' + value%>"}}function u(t){var e=t;"CANVAS"!==e.get("tagName")&&(e=e.one("canvas"));return e}function d(i,t){if(t){var e=i.sampleLabels;i.sampleLabels=i.seriesLabels;i.seriesLabels=e;i.data=p.Array(i.data[0]).map(function(t,e){return p.Array(i.data).map(function(t){return t[e]})})}var s=Math.min(i.data.length,i.sampleLabels.length);var a=Math.min(i.data[0].length,i.seriesLabels.length);i.sampleLabels=i.sampleLabels.slice(0,s);i.seriesLabels=i.seriesLabels.slice(0,a);i.data=i.data.slice(0,s);for(var n=0;n<i.data.length;n++)i.data[n]=i.data[n].slice(0,a);return i}function i(t,e,i){var s=t.datasets[0][e].length;var a=i.sampleLabels.length-s;var n=t.datasets.length;var o=i.seriesLabels.length-n;return o||a&&o}function s(t,e,i){var s=t.datasets.length;var a=i.seriesLabels.length-s;var n=0;if(a>0){var o=t.datasets[s-1];for(n=0;n<a;n++)t.datasets.push(p.clone(o))}else a<0&&(t.datasets=t.datasets.slice(0,i.seriesLabels.length));var h=t.datasets[0][e].length;var l=i.sampleLabels.length-h;if(l>0){var r=h;for(n=0;n<l;n++){var c=p.Array(i.seriesLabels).map(function(){return 0});t.addData(c,i.sampleLabels[r++])}}else if(l<0)for(n=0;n>l;n--)t.removeData();var u=0;for(u=0;u<i.sampleLabels.length;u++)t.scale.xLabels[u]=i.sampleLabels[u];for(u=0;u<t.datasets.length;u++){t.datasets[u].label=i.seriesLabels[u];for(n=0;n<t.datasets[u][e].length;n++){var d=i.data[n][u];(isNaN(d)||null===d||void 0===d)&&(d=0);t.datasets[u][e][n].value=[d];t.datasets[u][e][n].label=i.sampleLabels[n]}}t.update()}function f(s,a){return function(t){var e="";e+='<ul class="'+p.Escape.html(t.name.toLowerCase())+'-legend">';for(var i=0;i<t[s].length;i++){e+='<li><span style="background-color:'+t[s][i][a]+'"></span>';t[s][i].label&&(e+=p.Escape.html(t[s][i].label));e+="</li>"}e+="</ul>";return e}}var a=function(t,e,i,s,a){this.node=t;this._options=a||{};this._canvas=u(t);this._narrow=false;this._palette=i;this._flip=s;this._data=d(p.clone(e,true),this._flip);this._makeChart();this.generateLegend();this.resize();o(this)};a.prototype={destroy:function(){this._chart.destroy();t(this)},resize:function(){var t=this._canvas.getDOMNode();if(t){if(t.parentNode.clientWidth>0){this._chart.stop();this._chart.resize(this._chart.render,true);if(t.parentNode.clientWidth<e){if("Bar"===this._chart.name&&!this._narrow){this._options=p.merge(this._options,{barValueSpacing:5,barDatasetSpacing:1});this._rebuildChart()}this.node.addClass("narrow-chart");this._narrow=true}else{if("Bar"===this._chart.name&&this._narrow){this._options=p.merge(this._options,{barValueSpacing:20,barDatasetSpacing:5});this._rebuildChart()}this.node.removeClass("narrow-chart");this._narrow=false}}}else h()},generateLegend:function(){this.node.all(".legend-content").each(function(t){t.empty();t.append(this._chart.generateLegend())},this)},_rebuildChart:function(){this._chart.destroy();this._makeChart()}};var g=p.namespace("ChartJS").BarChart=p.extend(function(){a.apply(this,arguments)},a,{_makeChart:function(){var t=p.merge(c(this.node),{barShowStroke:true,datasetStrokeWidth:3,animationSteps:25,barValueSpacing:20,barDatasetSpacing:5,legendTemplate:f("datasets","fillColor")},this._options);var e={labels:this._data.sampleLabels,datasets:[]};for(var i=0;i<this._data.seriesLabels.length;i++){var s=[];for(var a=0;a<this._data.sampleLabels.length;a++)s.push(this._data.data[a][i]);e.datasets.push({label:this._data.seriesLabels[i],data:s,fillColor:l(this._palette,i,"dark"),strokeColor:"rgba(0,0,0,0)",highlightFill:l(this._palette,i,"medium"),highlightStroke:"rgba(0,0,0,0)"})}this._canvas.empty();var n=this._canvas.getDOMNode().getContext("2d");this._chart=new P(n).Bar(e,t)},sync:function(t){x(t)?this._data=r(k.CHART_BAR):this._data=d(p.clone(t,true),this._flip);i(this._chart,"bars",this._data)?this._rebuildChart():s(this._chart,"bars",this._data);this.generateLegend();this.resize()}});var m=p.ChartJS.LineChart=p.extend(function(){a.apply(this,arguments)},a,{_makeChart:function(){var t=p.merge(c(this.node),{datasetFill:false,animationSteps:25,legendTemplate:f("datasets","strokeColor")},this._options);var e={labels:this._data.sampleLabels,datasets:[]};for(var i=0;i<this._data.seriesLabels.length;i++){var s=[];for(var a=0;a<this._data.sampleLabels.length;a++)s.push(this._data.data[a][i]);e.datasets.push({label:this._data.seriesLabels[i],data:s,fillColor:"rgba(0,0,0,0)",strokeColor:l(this._palette,i,"dark"),pointColor:l(this._palette,i,"dark"),pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:l(this._palette,i,"medium")})}var n=this._canvas.getDOMNode().getContext("2d");this._chart=new P(n).Line(e,t)},sync:function(t){x(t)?this._data=r(k.CHART_LINE):this._data=d(p.clone(t,true),this._flip);i(this._chart,"points",this._data)?this._rebuildChart():s(this._chart,"points",this._data);this.generateLegend();this.resize()}});function v(t){var e=p.Array(t.data).reduce(function(t,e){return t+(e.length>0?e[0]:0)},0);0===e&&(t.data=p.Array(t.data).map(function(t){return p.Array(t).map(function(t,e){return 0===e?1:t})}));return t}var b=p.ChartJS.PieChart=p.extend(function(){a.apply(this,arguments)},a,{_makeChart:function(){var t=p.merge(c(this.node),{datasetFill:false,percentageInnerCutout:60,animationSteps:25,legendTemplate:f("segments","fillColor")},this._options);var e=[];for(var i=0;i<this._data.sampleLabels.length;i++)e.push({label:this._data.sampleLabels[i],value:this._data.data[i][0],color:l(this._palette,i,"dark"),highlight:l(this._palette,i,"medium")});var s=this._canvas.getDOMNode().getContext("2d");this._chart=new P(s).Pie(e,t)},sync:function(t){var e=0;x(t)?this._data=r(k.CHART_PIE):this._data=v(d(p.clone(t,true),this._flip));var i=this._chart;var s=this._data;var a=i.segments.length;var n=s.sampleLabels.length-a;if(n>0){var o=a;for(e=0;e<n;e++){i.addData({value:0,label:s.sampleLabels[o],color:l(this._palette,o,"dark"),highlight:l(this._palette,o,"medium")});o++}}else if(n<0)for(e=0;e>n;e--)i.removeData();for(var h=0;h<i.segments.length;h++){i.segments[h].value=s.data[h][0];i.segments[h].label=s.sampleLabels[h]}i.update();this.generateLegend();this.resize()}});p.ChartJS.createChart=function(t,e,i,s,a){function n(t){switch(t){case k.CHART_BAR:return g;case k.CHART_LINE:return m;case k.CHART_PIE:return b}}var o=parseInt(t,10);i&&i.data&&0!==i.data.length||(i=r(o));var h=n(o);var l=new h(e,i,s,a);return l};var y=p.ChartJS.initializeCharts=function(){function t(t){h();var e=n.map(function(t){return t.node});var i=e.indexOf(t)>=0;if(!i){var s=t.getAttribute("data-settings")||"{}";try{var a=JSON.parse(s.replace(/\&quot;/g,'"'));p.ChartJS.createChart(a.chartType,t,a.dataTable,a.palette,a.flip)}catch(t){if(!(t instanceof SyntaxError))throw t;console.error("[layout-engine/chartjs-helpers] Failed to render chart. Parse error.")}}}p.all(".sqs-block.chart-block .chart-block-container").each(t)};var S;function C(){function t(){clearTimeout(S);S=setTimeout(function(){n.forEach(function(t){t.resize()})},50)}p.one(p.config.win).after("resize",t)}p.config.win.Squarespace=p.config.win.Squarespace||{onInitialize:w,onDestroy:w};p.config.win.Squarespace.onInitialize(p,function(){y();C()});p.config.win.Squarespace.onDestroy(p,function(){clearTimeout(S);n.forEach(function(t){t.destroy()})})},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/chartjs-helpers.js":function(t,e){YUI.add("squarespace-chartjs-helpers",function(t){},"1.0",{requires:["@sqs/layout-engine/chartjs-helpers"]})},"./src/main/webapp/universal/scripts-v6/rollups/chartjs-helpers.manifest.js":function(t,e,i){i("./src/main/webapp/universal/scripts-v6/chartjs-helpers.js");i("./src/main/webapp/universal/scripts-layout-engine/shared/utils/chartjs-helpers.js")}});
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/chartjs-helpers-1bbd974c7990a41c46715-min.en-US.js.map